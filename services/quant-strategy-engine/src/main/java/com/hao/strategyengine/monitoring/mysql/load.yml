# ==========================================================
# MySQL 监控器配置示例
# ==========================================================
# 将以下配置添加到 application.yml 或 application.properties 中

monitor:
  mysql:
    # 连接使用率告警阈值（0.0-1.0），默认 0.7 即 70%
    # 当 Threads_connected / max_connections 超过此值时触发警告
    connection-usage-threshold: 0.7

    # 线程压力高负载阈值（相对于CPU核心数的倍数），默认 2.0
    # 当 Threads_running / CPU核心数 超过此值时标记为高负载
    thread-pressure-high: 2.0

    # 线程压力过载阈值（相对于CPU核心数的倍数），默认 3.0
    # 当 Threads_running / CPU核心数 超过此值时标记为过载
    thread-pressure-overload: 3.0

    # 是否启用详细日志，默认 false
    # true: 输出详细的监控指标和分析结果
    # false: 仅输出关键信息，减少日志量
    verbose-logging: false

# ==========================================================
# 不同环境的推荐配置
# ==========================================================

# 【开发环境】
# monitor.mysql.verbose-logging: true  # 开启详细日志便于调试
# monitor.mysql.connection-usage-threshold: 0.8  # 开发环境连接压力小，可适当放宽

# 【测试环境】
# monitor.mysql.verbose-logging: true  # 压测时需要详细数据
# monitor.mysql.connection-usage-threshold: 0.7
# monitor.mysql.thread-pressure-high: 2.0

# 【生产环境】
# monitor.mysql.verbose-logging: false  # 生产环境减少日志量
# monitor.mysql.connection-usage-threshold: 0.7  # 保持70%的安全阈值
# monitor.mysql.thread-pressure-high: 2.0
# monitor.mysql.thread-pressure-overload: 3.0

# ==========================================================
# 使用示例
# ==========================================================

# 场景1：高并发业务，需要严格监控
# monitor:
#   mysql:
#     connection-usage-threshold: 0.6  # 更严格的阈值
#     thread-pressure-high: 1.5        # 更早发现压力问题
#     verbose-logging: true

# 场景2：低频次业务，放宽阈值
# monitor:
#   mysql:
#     connection-usage-threshold: 0.85
#     thread-pressure-high: 2.5
#     verbose-logging: false

# 场景3：压测环境，需要详细数据
# monitor:
#   mysql:
#     verbose-logging: true
#     connection-usage-threshold: 0.7
#     thread-pressure-high: 2.0